<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn European Portuguese - Free Interactive Course</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%231f2937'/%3E%3Ccircle cx='32' cy='32' r='26' fill='%23667eea'/%3E%3Ctext x='50%25' y='58%25' font-size='28' text-anchor='middle' fill='white' font-family='Arial, sans-serif' font-weight='700'%3EPT%3C/text%3E%3C/svg%3E">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">üáµüáπ PortuLingo</div>
            <div class="nav-links">
                <a href="#home">Home</a>
                <a href="#learn">Learn</a>
                <a href="#vault">My Vault</a>
                <a href="#dashboard">Dashboard</a>
                <a href="#tips">Tips</a>
                <a href="#plans">Plans</a>
                <a href="#coach">AI Coach</a>
                <button class="btn-theme" id="themeToggle" aria-label="Toggle theme" aria-pressed="false">Dark mode</button>
                <button class="btn-premium" id="premiumBtn">Go Premium</button>
            </div>
        </div>
    </nav>

    <section id="home" class="hero">
        <div class="hero-content">
            <h1>Master European Portuguese</h1>
            <p>Learn word by word with interactive lessons and engaging practice</p>
            <button class="btn-start" id="startBtn">Start Learning Free</button>
        </div>
        <div class="hero-visual">
            <div class="hero-photo tram" aria-hidden="true">
                <span class="photo-label">Lisboa</span>
            </div>
            <div class="hero-photo coast" aria-hidden="true">
                <span class="photo-label">Costa</span>
            </div>
            <div class="hero-stack">
                <div class="stack-card">Pastel de nata</div>
                <div class="stack-card">Tram 28</div>
                <div class="stack-card">Fado nights</div>
            </div>
            <div class="hero-badge" aria-label="European Portuguese only">EU‚ÄëPT only</div>
        </div>
    </section>

    <section id="learn" class="learning-section">
        <div class="learning-header">
            <div>
                <h2>Begin Your Journey</h2>
                <p class="muted">Pick a topic and start listening.</p>
            </div>
            <div class="speaker-toggle">
                <label><input type="radio" name="speakerGender" value="male" checked> Male form</label>
                <label><input type="radio" name="speakerGender" value="female"> Female form</label>
            </div>
        </div>
        <div class="topics-bar" id="topicFilters"></div>
        <div class="mood-strip" aria-hidden="true">
            <div class="mood-card">‚òï Caf√©</div>
            <div class="mood-card">üöã El√©trico</div>
            <div class="mood-card">üåä Atl√¢ntico</div>
            <div class="mood-card">üó∫Ô∏è Viagem</div>
        </div>
        <div class="lesson-grid" id="lessonGrid">
            <!-- Lessons will be dynamically loaded -->
        </div>
    </section>

    <section id="vault" class="vault-section">
        <h2>üìö My Learned Words Vault</h2>
        <div class="vault-stats">
            <div class="stat-card">
                <span class="stat-number" id="totalWords">0</span>
                <span class="stat-label">Words Learned</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="streak">0</span>
                <span class="stat-label">Day Streak</span>
            </div>
        </div>
        <div class="vault-actions">
            <div class="review-card">
                <div class="review-header">
                    <button class="btn-review" id="reviewBtn">Quick Review Quiz</button>
                    <span class="muted">Multiple choice powered by your SRS buckets.</span>
                </div>
                <div id="reviewPrompt" class="review-prompt">Tap start to generate a quick question.</div>
                <div id="reviewOptions" class="review-options"></div>
                <div id="reviewResult" class="review-result"></div>
            </div>
            <div class="srs-panel">
                <p class="muted">SRS Buckets</p>
                <div id="srsBuckets" class="srs-buckets"></div>
            </div>
        </div>
        <div class="vault-filters">
            <input type="text" id="vaultSearch" placeholder="Search Portuguese or English" aria-label="Search learned words">
            <div class="vault-sort-group">
                <button class="btn-sort active" id="vaultSortPt">Sort by Portuguese</button>
                <button class="btn-sort" id="vaultSortEn">Sort by English</button>
            </div>
            <button class="btn-clear" id="vaultClearFilters">Clear Filters</button>
        </div>
        <div class="word-list" id="wordList">
            <!-- Learned words will appear here -->
        </div>
    </section>

    <section id="dashboard" class="dashboard-section">
        <h2>User Dashboard</h2>
        <div class="dashboard-grid">
            <div class="dashboard-card">
                <h3>Account Status</h3>
                <p id="accountStatus">Free Plan</p>
                <button class="btn-upgrade">Upgrade to Premium</button>
            </div>
            <div class="dashboard-card">
                <h3>Progress</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <p id="progressText">0% Complete</p>
                <button class="btn-reset" id="resetProgressBtn">Reset Progress</button>
            </div>
            <div class="dashboard-card lesson-metrics">
                <h3>Lesson Insights</h3>
                <div class="metric-row">
                    <div class="metric-pill" id="lessonAccuracyStat">No accuracy data yet</div>
                    <div class="metric-pill" id="lessonTimeStat">No time tracked yet</div>
                </div>
                <p class="muted" id="lessonDetailStat">Complete a lesson to see details.</p>
            </div>
            <div class="dashboard-card">
                <h3>Voice Settings (EU‚ÄëPT only)</h3>
                <p class="muted">Choose a free, on-device EU Portuguese voice. Bundled Piper downloads only on demand. No Brazilian voices are shown.</p>
                <div class="voice-settings">
                    <label class="select-label">Preferred source
                        <select id="voiceSourceSelect" aria-label="Voice source">
                            <option value="auto">Auto (system first)</option>
                        </select>
                    </label>
                    <label class="select-label">Voice option
                        <select id="voiceSelect" aria-label="Voice option"></select>
                    </label>
                    <div class="voice-actions">
                        <button class="btn-small" id="voiceSampleBtn">Play Sample</button>
                        <button class="btn-small" id="voiceSaveBtn">Save Default</button>
                        <button class="btn-small" id="voiceDisableBundledBtn">Disable Bundled Voices</button>
                        <button class="btn-small" id="voiceDownloadBtn">Download Bundled Voice</button>
                    </div>
                    <label class="select-label">Bundled TTS API URL (HTTP)
                        <input type="url" id="voiceBundledApiUrl" placeholder="https://your-tts-endpoint.example.com/tts" aria-label="Bundled TTS API URL">
                    </label>
                    <p class="muted">Set an online TTS endpoint to stream audio for the bundled Piper model. Payload: JSON with text, lang, voiceKey, and modelUrl; response: audio/wav or audio/ogg.</p>
                    <div class="voice-status" id="voiceStatus">Detecting system voices‚Ä¶</div>
                    <div class="voice-diagnostics">
                        <div class="voice-line" id="voiceAvailability">System voices: ‚Äî. Bundled voice: ‚Äî.</div>
                        <div class="voice-line" id="voiceSelection">Selected: none (text only until ready).</div>
                        <div class="voice-line" id="voiceLastUsed">Last playback: idle.</div>
                    </div>
                    <div class="demo-phrase" id="voiceDemo">Demo: Ol√°! Vamos praticar portugu√™s europeu: p√£o, cora√ß√£o, obrigado, vinte e oito.</div>
                </div>
            </div>
        </div>
    </section>

    <section id="tips" class="tips-section">
        <div class="section-heading">
            <h2>EU Portuguese Tips (Free)</h2>
            <p class="muted">Proven ways to learn faster in 2025 without paying a cent.</p>
        </div>
        <div class="tips-grid">
            <div class="tip-card">
                <h3>Smart Note-Taking</h3>
                <ul>
                    <li>Use spaced, tiny cards: PT on top, EN + phonetics + example below.</li>
                    <li>Color-code gendered words (-o/-a) and nasal endings (√£o/√µe/em).</li>
                    <li>Record 10-second voice memos of your own pronunciation daily.</li>
                    <li>Weekly review: rewrite sentences from memory, then check audio.</li>
                </ul>
            </div>
            <div class="tip-card">
                <h3>Free Apps (Mobile + Desktop)</h3>
                <ul>
                    <li>Mobile: Google Recorder/Voice Memos + AnkiDroid/AnkiMobile for spaced repetition.</li>
                    <li>Desktop ("the C"): Anki + Language Reactor (YouTube/Netflix subtitles) + Mozilla TTS demo voices (EU-PT) for local playback.</li>
                    <li>Browser: Forvo + Lexico.pt for authentic EU-PT audio; Linguee for context sentences.</li>
                    <li>Keyboard: install PT-PT keyboard for fast accents (AltGr + vowels).</li>
                </ul>
            </div>
            <div class="tip-card">
                <h3>Daily Micro-Drills</h3>
                <ul>
                    <li>Shadow 5‚Äì8 key sentences (hear ‚Üí repeat) with nasal vowels and stress.</li>
                    <li>Swap gender/number: obrigado‚Üíobrigada, filho‚Üífilha, pronto‚Üípronta.</li>
                    <li>Record, compare to native audio, correct one sound per rep.</li>
                    <li>Finish with a 2-minute self-quiz: translate 5 words both directions.</li>
                </ul>
            </div>
            <div class="tip-card">
                <h3>Get Unstuck Fast</h3>
                <ul>
                    <li>Nasal vowels: hold the vowel shorter; focus on ‚Äú√£o/√£e/√µe‚Äù contrast.</li>
                    <li>Ser vs. Estar: ser = permanent traits; estar = states/locations.</li>
                    <li>Por vs. Para: por = through/cause; para = destination/purpose.</li>
                    <li>Listening wall: loop 30‚Äì60s of EU-PT radio daily to normalize rhythm.</li>
                </ul>
            </div>
        </div>
    </section>

    <section id="plans" class="plans-section">
        <div class="section-heading">
            <h2>Learning Plans</h2>
            <p class="muted">Fast-track with free basics or unlock the paid hero path.</p>
        </div>
        <div class="plan-grid">
            <div class="plan-card">
                <div class="plan-header">
                    <span class="plan-label">Free Tier</span>
                    <span class="plan-duration">Weeks 0‚Äì4</span>
                </div>
                <ul class="plan-list">
                    <li>Week 1: Greetings, numbers 0‚Äì20, please/thank you; pronounce ‚Äú√£o/√£es‚Äù.</li>
                    <li>Week 2: Caf√© orders + transport; shadow 5 sentences daily.</li>
                    <li>Week 3: Daily routines (eu sou/estou/tenho); gender swaps for nouns.</li>
                    <li>Week 4: Survival phrases; 5-minute review sessions twice daily.</li>
                </ul>
                <div class="plan-outcome">Outcome: hold a 1‚Äì2 minute intro and order food confidently.</div>
            </div>
            <div class="plan-card premium-plan" id="paidPlan">
                <div class="plan-header">
                    <span class="plan-label premium">Paid Tier</span>
                    <span class="plan-duration">Weeks 5‚Äì24</span>
                </div>
                <div class="premium-locked" id="paidPlanLocked">
                    <p>Unlock Premium to see the full hero roadmap and practice packs.</p>
                    <button class="btn-premium" id="unlockPaidPlan">Go Premium</button>
                </div>
                <div class="premium-body" id="paidPlanBody">
                    <ul class="plan-list">
                        <li>Weeks 5‚Äì8: Pronunciation clean-up ( É/ í, nasal vowels), 400-word core deck.</li>
                        <li>Weeks 9‚Äì12: Past & future tenses in speech; 3√ó weekly speaking drills.</li>
                        <li>Weeks 13‚Äì18: Domain packs (travel, work, healthcare); role-play scripts.</li>
                        <li>Weeks 19‚Äì24: Fluency sprints; 10-minute conversation with <2 errors/min.</li>
                    </ul>
                    <div class="plan-outcome">Outcome: B1-B2 range‚Äîhandle travel, daily life, and basic work chats with clear EU-PT pronunciation.</div>
                    <div class="plan-metrics">Proficiency markers: 1000+ active words, narrate past/future, shadow native clips at 85‚Äì90% clarity.</div>
                </div>
            </div>
        </div>
    </section>

    <section id="coach" class="coach-section">
        <div class="section-heading">
            <h2>AI Coach (Free & Local)</h2>
            <p class="muted">Hints adapt to your mistakes‚Äîno cloud, EU-PT only, speaks when needed.</p>
        </div>
        <div class="coach-grid">
            <div class="coach-card">
                <h3>Your Smart Hints</h3>
                <div id="aiHints" class="hint-list">
                    <p class="muted">Complete a lesson or quiz to see personalized tips.</p>
                </div>
            </div>
            <div class="coach-card">
                <h3>Stuck? Try This</h3>
                <ul id="stuckList" class="stuck-list">
                    <li>Nasal endings: practice ‚Äúp√£o / m√£os / cora√ß√µes‚Äù at 0.9√ó speed.</li>
                    <li>Gender endings: swap -o/-a pairs and replay audio twice.</li>
                    <li>Sentence melody: shadow ‚ÄúComo est√°? Onde fica o metro?‚Äù focusing on stress.</li>
                    <li>Recall both ways: PT‚ÜíEN then EN‚ÜíPT for your 5 hardest words.</li>
                </ul>
            </div>
            <div class="coach-card">
                <h3>Skill Dashboard</h3>
                <div id="skillStats" class="skill-grid">
                    <p class="muted">Complete a lesson to see skill stats.</p>
                </div>
                <div class="fix-pack-list" id="fixPackList">
                    <p class="muted">No fix packs yet‚Äîmake a few attempts first.</p>
                </div>
            </div>
        </div>
    </section>

    <div id="paywall" class="paywall-modal" style="display: none;">
        <div class="paywall-content">
            <span class="close-paywall">&times;</span>
            <h2>üåü Unlock Premium Features</h2>
            <div class="premium-features">
                <div class="feature">‚úì Unlimited AI Conversations</div>
                <div class="feature">‚úì Advanced Pronunciation Feedback</div>
                <div class="feature">‚úì Intermediate & Advanced Lessons</div>
                <div class="feature">‚úì Offline Access</div>
                <div class="feature">‚úì Certificate of Completion</div>
            </div>
            <button class="btn-subscribe">Subscribe Now - $9.99/month</button>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <span class="version-pill" id="appVersion">v0.4.0</span>
            <span>Built with HTML, CSS, and JavaScript</span>
        </div>
    </footer>

    <script type="module" src="./app.js"></script>
</body>
</html>
